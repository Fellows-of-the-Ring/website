<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="ico-page">
  <template>
    <style include="iron-flex iron-flex-alignment prism-theme-default">
    :host {
      display: block;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      @apply(--layout-vertical);
      /*@apply(--layout-center-justified);*/
      font-family: Roboto Mono, monospace;
    }
    
    .rules .section-head::before,
    .rules .section-head::after {
      background: white;
    }
    
    .rules .section-head {
      color: white;
    }
    
    .section-head {
      font-size: 32px;
      line-height: 46px;
      font-weight: 300;
      text-align: center;
      align-items: center;
      width: 100%;
      font-weight: 400;
    }
    
    .section-head::before,
    .section-head::after {
      content: '';
      width: 10%;
      height: 2px;
      margin: 16px;
      background: #212121;
    }
    
    .about {
      background: linear-gradient(rgba(79, 195, 247, 0.45), rgba(79, 195, 247, 0.45)), /*layer*/
      url(/images/bg1.svg);
      background-size: cover;
      min-height: 80vh;
    }
    
    .timeline {
      /*background-color: #2979ff;*/
      padding: 0;
    }
    
    .rules {
      background: url(/images/conversation-ai-hero.png), #004ecb;
      background-size: cover;
      background-position: bottom -65px right;
      background-size: 1076px 648px;
      color: rgba(255, 255, 255, 0.77);
    }
    
    .rules a {
      color: yellow;
    }
    
    .smart-contract {
      background-color: #fffde7;
    }
    
    #output {
      height: 360px;
      width: 100%;
      overflow: scroll;
      text-wrap: normal;
      border-top: dashed var(--divider-color) 1px;
      padding-top: 32px;
      font-size: 12px;
    }
    
    li {
      line-height: 28px;
    }
    
    @media (min-width: 400px) {}
    
    @media (min-width: 1200px) {
      #output {
        width: 100%;
        height: 80vh;
        overflow: scroll;
        padding: 0 24px 0 24px;
      }
      .rules {
        min-height: 80vh;
      }
    }
    </style>
    <inpage-section class="about">
    </inpage-section>
    <inpage-section class="timeline">
      <vertical-timeline></vertical-timeline>
    </inpage-section>
    <inpage-section class="rules">
      <div class="vertical layout">
        <div class="section-head horizontal center center-justified layout">ICO规则</div>
        <ul>
          <li>ICO采用以太坊（ETH）智能合约，该<a href="">合约代码开源</a>，工社区审阅;</li>
          <li> <strong>ICO共7个阶段，每阶段时长约1天</strong>（实际在智能合约中采用以太坊区块高度确定）；</li>
          <li> 每个阶段在当日早上约11点开始，持续到第二天11点。</li>
          <li> 每个阶段筹2万个以太，筹到这个数目该阶段为“筹满”，否则为“未筹满）。</li>
          <li> 筹满后投资者的ETH会被自动打回，不会损失；投资者只能等下一个阶段开始才可以继续投资。</li>
          <li> 如果某个阶段未筹满，整个ICO结束，不会有下一阶段；</li>
          <li> 如果一个阶段筹满，由团队触发下一个阶段开始的区块链高度（即时间）。</li>
          <li> 每个阶段的价格都比上一个阶段更高（见表格）</li>
          <li> 如果前3个阶段任意一个未筹满，整个ICO失败。资金返还。</li>
          <li> 如果前3个阶段凑满，ICO成功，最后一个未筹满阶段资金不返还。</li>
          <li> 如果第4个阶段筹满，但第5个阶段未筹满，团队占比为45%，</li>
          <li> 如果第5，6，7个阶段成功，团队占比为50%</li>
          <li> 第7个成功后，ICO结束。</li>
          <li> ICO期间投资者的代币通过智能合约自动发行，成功后再根据上述规则，一次性发行未发售的代币 - 即用售出代币除以出售占比;</li>
          <li> 未发售的代币中，5%通过preICO商定价格出售给早期投资者；</li>
          <li> 未发售的代币中，45%留给团队；</li>
          <li> 未发售的代币中，50%留给社区推广和对外合作；</li>
          <li> 团队代币锁定期为3年，第一年后释放25%，第二年35%， 第三年40%；用于社区推广部分不锁定。</li>
        </ul>
      </div>
    </inpage-section>
    <inpage-section class="smart-contract">
      <iron-ajax url="https://raw.githubusercontent.com/MTTP-Project/ico/master/contracts/MTTPToken.sol" auto handle-as="text" last-response="{{code}}"></iron-ajax>
      <prism-highlighter></prism-highlighter>
      <div class="section-head horizontal center-justified layout">ICO合约代码</div>
      <pre id="output"></pre>
    </inpage-section>
    <common-footer></common-footer>
  </template>
  <script>
  Polymer({
    is: 'ico-page',
    properties: {
      icosettings: Object,
      language: {
        type: String
      },
      code: {
        type: String,
        observer: '_render'
      }
    },
    _render: function() {
      this.$.output.innerHTML = this._highlight(this.code);
    },
    _highlight: function(code) {
      return this.fire('syntax-highlight', {
        code: code,
        lang: "JavaScript"
      }).detail.code;
    }

    // item: {
    //   type: Object,
    //   observer: '_itemChanged'
    // },
    // section: {
    //   type: String
    // },
    // relatedItems: {
    //   type: Array
    // }

    // _itemChanged: function(item) {
    //   this.$.img.src = '';
    //   this.$.img.src = item.imageUrl;
    // }
  });
  </script>
</dom-module>
